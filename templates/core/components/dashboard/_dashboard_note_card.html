{% load static %}

<div class="col-md-6 mb-4">
  <div class="card note-card h-100 shadow-sm">
    <div class="card-body d-flex flex-column">
      <h5 class="card-title text-truncate">{{ note.title }}</h5>

      <p class="card-text note-content-preview flex-grow-1">
        {{ note.content|truncatewords:20 }}
      </p>

      <hr />

      <div
        class="d-flex justify-content-between align-items-center"
      >
        <a
          href="{% url 'video_player' note.course.id %}?vid={{ note.video.id }}"
          class="btn btn-sm btn-custom-in"
        >
          <i class="fas fa-play me-1"></i> Go to Video
        </a>
        <small class="text-muted">
          Timestamp: 
          {% widthratio note.video_timestamp 60 1 as minutes %}
          
          {% widthratio minutes 60 -1 as total_seconds_to_subtract %}
          
          {{ minutes }}:{{ note.video_timestamp|add:total_seconds_to_subtract|stringformat:"02d" }}
        </small>
      </div>
    </div>
    <div class="card-footer bg-light border-0 py-2">
      <small class="text-muted">
        <i class="fas fa-video me-1"></i>
        <strong>Video:</strong>
        {{ note.video.title|truncatechars:25 }}
      </small>
      <br />
      <small class="text-muted">
        <i class="fas fa-folder me-1"></i>
        <strong>Course:</strong>
        {{ note.course.title|truncatechars:25 }}
      </small>
    </div>
  </div>
</div>